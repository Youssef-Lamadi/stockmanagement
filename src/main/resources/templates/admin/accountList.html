<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Admin</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="row">
    <!-- Sidebar -->
    <div class="col-md-3 bg-white border-end p-3">
        <ul class="nav flex-column">
            <li class="nav-item"><a class="nav-link" href="#">Accueil</a></li>
            <li class="nav-item"><a class="nav-link active fw-bold" href="#" th:href="@{/warehouse/}">Gestion des entrepôts</a></li>
            <li class="nav-item">Mouvements de stock
                <ul class="nav flex-column ms-3">
                    <li class="nav-item"><a class="nav-link" href="#">Réceptions</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">Livraisons</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">Transferts</a></li>
                </ul>
            </li>
            <li class="nav-item">Manage Accounts
                <ul class="nav flex-column ms-4">
                    <li class="nav-item"> <!--th:if="${role == 'ROLE_ADMIN'}"--><a class="nav-link" href="#" th:href="@{/admin/adminHome}">Admin Home</a></li>
                    <li class="nav-item"><!--th:if="${role == 'ROLE_ADMIN'}"--><a class="nav-link" href="#" th:href="@{/common/managePersons}">Create persons</a></li>
                    <li class="nav-item" ><!--th:if="${role == 'ROLE_ADMIN'}"--><a class="nav-link" href="#" th:href="@{/admin/createAccounts}">Create Accounts</a></li>
                    <li class="nav-item"><!--th:if="${role == 'ROLE_ADMIN'}"--><a class="nav-link" href="#" th:href="@{/admin/manageAccounts}">List Accounts</a></li>
                    <li class="nav-item" ><!--th:if="${role == 'ROLE_USER'}"--><a class="nav-link" href="#" th:href="@{/user/userHome}">User Home</a></li>
                </ul>
            </li>
            <li class="nav-item"><a class="nav-link" href="#">Inventaires</a></li>
            <li>
                <form th:action="@{/logout}" method="post">
                    <button type="submit">Logout</button>
                </form>
            </li>
        </ul>
    </div>
<div class="col-md-9 p-4">
    <div>
    <h3>Accounts</h3>
</div>

<div>
    <div th:if="${accountModel != null and accountModel.password != null}" style="color: green">
        User created. The password generated is : <span th:text="${accountModel.password}"></span>
    </div>

    <table class="table">
        <thead>
        <tr>
            <th scope="col">Login</th>
            <th scope="col">Role</th>
            <th scope="col">Last Name</th>
            <th scope="col">First Name</th>
            <th scope="col">Email</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="a : ${accountList}">
            <td th:text="${a.username}"></td>
            <td th:text="${a.role.roleName}"></td>
            <td th:text="${a.person.lastName}"></td>
            <td th:text="${a.person.firstName}"></td>
            <td th:text="${a.person.email}"></td>
        </tr>
        </tbody>
    </table>
</div>
</div>
</div>
</body>
</html>
